{% extends "main/base.html" %}
{% load static %}

{% block content %}
<div class="product-detail">
  <div class="product-gallery">
    <img src="{{ product.image.url }}" alt="{{ product.title }}">
  </div>

  <div class="product-info">
    <h1 class="product-title">{{ product.title }}</h1>
    <p class="product-brand">
      –ë—Ä–µ–Ω–¥: <a href="{{ product.brand.get_absolute_url }}">{{ product.brand.title }}</a>
    </p>
    <p class="product-category">
      –ö–∞—Ç–µ–≥–æ—Ä–∏—è: <a href="{{ product.category.get_absolute_url }}">{{ product.category.title }}</a>
    </p>
    <p class="product-price">{{ product.price }} ‚ÇΩ</p>

<form method="post" action="{% url 'cart:cart_add' product_id=product.id %}">
  {% csrf_token %}
  
  <div class="size-options">
    {% for size, label in product.SIZE_CHOICES %}
      <input type="radio" name="size" id="size-{{ size }}" value="{{ size }}" required>
      <label for="size-{{ size }}">{{ label }}</label>
    {% endfor %}
  </div>

  <div class="quantity-wrapper">
    <label for="id_quantity" class="quantity-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</label>
    {{ cart_product_form.quantity }}
  </div>
  
  <input type="hidden" name="update" value="False">
  <button type="submit" class="btn-buy btn-add-cart">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É üõí</button>
</form>



    <div class="product-description">
      <h2>–û–ø–∏—Å–∞–Ω–∏–µ</h2>
      <p>{{ product.description }}</p>
    </div>
  </div>
</div>
<!-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ -->
<div class="comments-section">
  <h2>–û—Ç–∑—ã–≤—ã –æ —Ç–æ–≤–∞—Ä–µ</h2>

  {% for comment in comments %}
    <div class="comment">
      <div class="comment-header">
        <strong>{{ comment.name }}</strong>
        <span class="comment-date">{{ comment.created|date:"d.m.Y H:i" }}</span>
      </div>
      <p class="comment-body">{{ comment.body }}</p>
    </div>
  {% empty %}
    <p class="no-comments">–ü–æ–∫–∞ –Ω–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!</p>
  {% endfor %}
</div>

<!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è -->
<div class="comment-form">
  <h3>–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</h3>
  <form method="post">
    {% csrf_token %}
    <div class="form-group">
      {{ form.name.label_tag }}  
      {{ form.name }}
    </div>
    <div class="form-group">
      {{ form.email.label_tag }}
      {{ form.email }}
    </div>
    <div class="form-group">
      {{ form.body.label_tag }}
      {{ form.body }}
    </div>
    <button type="submit" class="btn-buy">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
  </form>
</div>

{% endblock %}
